# https://medium.com/nona-web/safeguarding-nginx-rewrite-rule-deploys-70360b9dc19a
name: Node CI

on:
  push:

jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Update apt-get
        run: apt-get update
      - name: Install sudo
        run: apt-get -y install sudo
      - name: Install nginx
        # https://stackoverflow.com/a/58002908/3343716
        run: sudo apt-get install -y nginx # -y flag is to accept all prompts to prevent stopping the process
      - name: Test
        # run: cd / && ls && sudo nginx -c foo.conf -t
        run: sudo nginx -c /github/workspace/foo.conf -t
      - name: Deploy
        run: echo Deploying
